!function(a,b){"use strict";function d(){c.READY||(c.event.determineEventTypes(),c.utils.each(c.gestures,function(a){c.detection.register(a)}),c.event.onTouch(c.DOCUMENT,c.EVENT_MOVE,c.detection.detect),c.event.onTouch(c.DOCUMENT,c.EVENT_END,c.detection.detect),c.READY=!0)}var c=function(a,b){return new c.Instance(a,b||{})};c.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},c.HAS_POINTEREVENTS=a.navigator.pointerEnabled||a.navigator.msPointerEnabled,c.HAS_TOUCHEVENTS="ontouchstart"in a,c.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,c.NO_MOUSEEVENTS=c.HAS_TOUCHEVENTS&&a.navigator.userAgent.match(c.MOBILE_REGEX),c.EVENT_TYPES={},c.DIRECTION_DOWN="down",c.DIRECTION_LEFT="left",c.DIRECTION_UP="up",c.DIRECTION_RIGHT="right",c.POINTER_MOUSE="mouse",c.POINTER_TOUCH="touch",c.POINTER_PEN="pen",c.EVENT_START="start",c.EVENT_MOVE="move",c.EVENT_END="end",c.DOCUMENT=a.document,c.plugins=c.plugins||{},c.gestures=c.gestures||{},c.READY=!1,c.utils={extend:function(a,c,d){for(var e in c)a[e]!==b&&d||(a[e]=c[e]);return a},each:function(a,c,d){var e,f;if("forEach"in a)a.forEach(c,d);else if(a.length!==b){for(e=0,f=a.length;f>e;e++)if(c.call(d,a[e],e,a)===!1)return}else for(e in a)if(a.hasOwnProperty(e)&&c.call(d,a[e],e,a)===!1)return},hasParent:function(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1},getCenter:function(a){var b=[],d=[];return c.utils.each(a,function(a){b.push("undefined"!=typeof a.clientX?a.clientX:a.pageX),d.push("undefined"!=typeof a.clientY?a.clientY:a.pageY)}),{pageX:(Math.min.apply(Math,b)+Math.max.apply(Math,b))/2,pageY:(Math.min.apply(Math,d)+Math.max.apply(Math,d))/2}},getVelocity:function(a,b,c){return{x:Math.abs(b/a)||0,y:Math.abs(c/a)||0}},getAngle:function(a,b){var c=b.pageY-a.pageY,d=b.pageX-a.pageX;return 180*Math.atan2(c,d)/Math.PI},getDirection:function(a,b){var d=Math.abs(a.pageX-b.pageX),e=Math.abs(a.pageY-b.pageY);return d>=e?a.pageX-b.pageX>0?c.DIRECTION_LEFT:c.DIRECTION_RIGHT:a.pageY-b.pageY>0?c.DIRECTION_UP:c.DIRECTION_DOWN},getDistance:function(a,b){var c=b.pageX-a.pageX,d=b.pageY-a.pageY;return Math.sqrt(c*c+d*d)},getScale:function(a,b){return a.length>=2&&b.length>=2?this.getDistance(b[0],b[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,b){return a.length>=2&&b.length>=2?this.getAngle(b[1],b[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==c.DIRECTION_UP||a==c.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(a,b){b&&a&&a.style&&(c.utils.each(["webkit","khtml","moz","Moz","ms","o",""],function(d){c.utils.each(b,function(b){d&&(b=d+b.substring(0,1).toUpperCase()+b.substring(1)),b in a.style&&(a.style[b]=b)})}),"none"==b.userSelect&&(a.onselectstart=function(){return!1}),"none"==b.userDrag&&(a.ondragstart=function(){return!1}))}},c.Instance=function(a,b){var e=this;return d(),this.element=a,this.enabled=!0,this.options=c.utils.extend(c.utils.extend({},c.defaults),b||{}),this.options.stop_browser_behavior&&c.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),c.event.onTouch(a,c.EVENT_START,function(a){e.enabled&&c.detection.startDetect(e,a)}),this},c.Instance.prototype={on:function(a,b){var d=a.split(" ");return c.utils.each(d,function(a){this.element.addEventListener(a,b,!1)},this),this},off:function(a,b){var d=a.split(" ");return c.utils.each(d,function(a){this.element.removeEventListener(a,b,!1)},this),this},trigger:function(a,b){b||(b={});var d=c.DOCUMENT.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=b;var e=this.element;return c.utils.hasParent(b.target,e)&&(e=b.target),e.dispatchEvent(d),this},enable:function(a){return this.enabled=a,this}};var e=null,f=!1,g=!1;c.event={bindDom:function(a,b,d){var e=b.split(" ");c.utils.each(e,function(b){a.addEventListener(b,d,!1)})},onTouch:function(a,b,d){var h=this;this.bindDom(a,c.EVENT_TYPES[b],function(i){var j=i.type.toLowerCase();if(!j.match(/mouse/)||!g){j.match(/touch/)||j.match(/pointerdown/)||j.match(/mouse/)&&1===i.which?f=!0:j.match(/mouse/)&&!i.which&&(f=!1),j.match(/touch|pointer/)&&(g=!0);var k=0;f&&(c.HAS_POINTEREVENTS&&b!=c.EVENT_END?k=c.PointerEvent.updatePointer(b,i):j.match(/touch/)?k=i.touches.length:g||(k=j.match(/up/)?0:1),k>0&&b==c.EVENT_END?b=c.EVENT_MOVE:k||(b=c.EVENT_END),(k||null===e)&&(e=i),d.call(c.detection,h.collectEventData(a,b,h.getTouchList(e,b),i)),c.HAS_POINTEREVENTS&&b==c.EVENT_END&&(k=c.PointerEvent.updatePointer(b,i))),k||(e=null,f=!1,g=!1,c.PointerEvent.reset())}})},determineEventTypes:function(){var a;a=c.HAS_POINTEREVENTS?c.PointerEvent.getEvents():c.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],c.EVENT_TYPES[c.EVENT_START]=a[0],c.EVENT_TYPES[c.EVENT_MOVE]=a[1],c.EVENT_TYPES[c.EVENT_END]=a[2]},getTouchList:function(a){return c.HAS_POINTEREVENTS?c.PointerEvent.getTouchList():a.touches?a.touches:(a.identifier=1,[a])},collectEventData:function(a,b,d,e){var f=c.POINTER_TOUCH;return(e.type.match(/mouse/)||c.PointerEvent.matchType(c.POINTER_MOUSE,e))&&(f=c.POINTER_MOUSE),{center:c.utils.getCenter(d),timeStamp:(new Date).getTime(),target:e.target,touches:d,eventType:b,pointerType:f,srcEvent:e,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return c.detection.stopDetect()}}}},c.PointerEvent={pointers:{},getTouchList:function(){var a=this,b=[];return c.utils.each(a.pointers,function(a){b.push(a)}),b},updatePointer:function(a,b){return a==c.EVENT_END?this.pointers={}:(b.identifier=b.pointerId,this.pointers[b.pointerId]=b),Object.keys(this.pointers).length},matchType:function(a,b){if(!b.pointerType)return!1;var d=b.pointerType,e={};return e[c.POINTER_MOUSE]=d===b.MSPOINTER_TYPE_MOUSE||d===c.POINTER_MOUSE,e[c.POINTER_TOUCH]=d===b.MSPOINTER_TYPE_TOUCH||d===c.POINTER_TOUCH,e[c.POINTER_PEN]=d===b.MSPOINTER_TYPE_PEN||d===c.POINTER_PEN,e[a]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},c.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,b){this.current||(this.stopped=!1,this.current={inst:a,startEvent:c.utils.extend({},b),lastEvent:!1,name:""},this.detect(b))},detect:function(a){if(this.current&&!this.stopped){a=this.extendEventData(a);var b=this.current.inst.options;return c.utils.each(this.gestures,function(c){return this.stopped||b[c.name]===!1||c.handler.call(c,a,this.current.inst)!==!1?void 0:(this.stopDetect(),!1)},this),this.current&&(this.current.lastEvent=a),a.eventType==c.EVENT_END&&!a.touches.length-1&&this.stopDetect(),a}},stopDetect:function(){this.previous=c.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(a){var b=this.current.startEvent;!b||a.touches.length==b.touches.length&&a.touches!==b.touches||(b.touches=[],c.utils.each(a.touches,function(a){b.touches.push(c.utils.extend({},a))}));var h,i,d=a.timeStamp-b.timeStamp,e=a.center.pageX-b.center.pageX,f=a.center.pageY-b.center.pageY,g=c.utils.getVelocity(d,e,f);return"end"===a.eventType?(h=this.current.lastEvent&&this.current.lastEvent.interimAngle,i=this.current.lastEvent&&this.current.lastEvent.interimDirection):(h=this.current.lastEvent&&c.utils.getAngle(this.current.lastEvent.center,a.center),i=this.current.lastEvent&&c.utils.getDirection(this.current.lastEvent.center,a.center)),c.utils.extend(a,{deltaTime:d,deltaX:e,deltaY:f,velocityX:g.x,velocityY:g.y,distance:c.utils.getDistance(b.center,a.center),angle:c.utils.getAngle(b.center,a.center),interimAngle:h,direction:c.utils.getDirection(b.center,a.center),interimDirection:i,scale:c.utils.getScale(b.touches,a.touches),rotation:c.utils.getRotation(b.touches,a.touches),startEvent:b}),a},register:function(a){var d=a.defaults||{};return d[a.name]===b&&(d[a.name]=!0),c.utils.extend(c.defaults,d,!0),a.index=a.index||1e3,this.gestures.push(a),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}},c.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(a,b){if(c.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),this.triggered=!1,void 0;if(!(b.options.drag_max_touches>0&&a.touches.length>b.options.drag_max_touches))switch(a.eventType){case c.EVENT_START:this.triggered=!1;break;case c.EVENT_MOVE:if(a.distance<b.options.drag_min_distance&&c.detection.current.name!=this.name)return;if(c.detection.current.name!=this.name&&(c.detection.current.name=this.name,b.options.correct_for_drag_min_distance&&a.distance>0)){var d=Math.abs(b.options.drag_min_distance/a.distance);c.detection.current.startEvent.center.pageX+=a.deltaX*d,c.detection.current.startEvent.center.pageY+=a.deltaY*d,a=c.detection.extendEventData(a)}(c.detection.current.lastEvent.drag_locked_to_axis||b.options.drag_lock_to_axis&&b.options.drag_lock_min_distance<=a.distance)&&(a.drag_locked_to_axis=!0);var e=c.detection.current.lastEvent.direction;a.drag_locked_to_axis&&e!==a.direction&&(a.direction=c.utils.isVertical(e)?a.deltaY<0?c.DIRECTION_UP:c.DIRECTION_DOWN:a.deltaX<0?c.DIRECTION_LEFT:c.DIRECTION_RIGHT),this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),b.trigger(this.name+a.direction,a),(b.options.drag_block_vertical&&c.utils.isVertical(a.direction)||b.options.drag_block_horizontal&&!c.utils.isVertical(a.direction))&&a.preventDefault();break;case c.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},c.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(a,b){switch(a.eventType){case c.EVENT_START:clearTimeout(this.timer),c.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==c.detection.current.name&&b.trigger("hold",a)},b.options.hold_timeout);break;case c.EVENT_MOVE:a.distance>b.options.hold_threshold&&clearTimeout(this.timer);break;case c.EVENT_END:clearTimeout(this.timer)}}},c.gestures.Release={name:"release",index:1/0,handler:function(a,b){a.eventType==c.EVENT_END&&b.trigger(this.name,a)}},c.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_min_touches:1,swipe_max_touches:1,swipe_velocity:.7},handler:function(a,b){if(a.eventType==c.EVENT_END){if(b.options.swipe_max_touches>0&&a.touches.length<b.options.swipe_min_touches&&a.touches.length>b.options.swipe_max_touches)return;(a.velocityX>b.options.swipe_velocity||a.velocityY>b.options.swipe_velocity)&&(b.trigger(this.name,a),b.trigger(this.name+a.direction,a))}}},c.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(a,b){if(a.eventType==c.EVENT_END&&"touchcancel"!=a.srcEvent.type){var d=c.detection.previous,e=!1;if(a.deltaTime>b.options.tap_max_touchtime||a.distance>b.options.tap_max_distance)return;d&&"tap"==d.name&&a.timeStamp-d.lastEvent.timeStamp<b.options.doubletap_interval&&a.distance<b.options.doubletap_distance&&(b.trigger("doubletap",a),e=!0),(!e||b.options.tap_always)&&(c.detection.current.name="tap",b.trigger(c.detection.current.name,a))}}},c.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(a,b){return b.options.prevent_mouseevents&&a.pointerType==c.POINTER_MOUSE?(a.stopDetect(),void 0):(b.options.prevent_default&&a.preventDefault(),a.eventType==c.EVENT_START&&b.trigger(this.name,a),void 0)}},c.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(a,b){if(c.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),this.triggered=!1,void 0;if(!(a.touches.length<2))switch(b.options.transform_always_block&&a.preventDefault(),a.eventType){case c.EVENT_START:this.triggered=!1;break;case c.EVENT_MOVE:var d=Math.abs(1-a.scale),e=Math.abs(a.rotation);if(d<b.options.transform_min_scale&&e<b.options.transform_min_rotation)return;c.detection.current.name=this.name,this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),e>b.options.transform_min_rotation&&b.trigger("rotate",a),d>b.options.transform_min_scale&&(b.trigger("pinch",a),b.trigger("pinch"+(a.scale<1?"in":"out"),a));break;case c.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return c}):"object"==typeof module&&"object"==typeof module.exports?module.exports=c:a.Hammer=c}(this);
